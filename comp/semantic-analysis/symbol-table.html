<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-comp docs-doc-id-semantic-analysis/symbol-table">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Symbol Table | Snow&#x27;s Wiki</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.xkun.dev/comp/semantic-analysis/symbol-table"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="wiki, tech, computer science"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-comp-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-comp-current"><meta data-rh="true" property="og:title" content="Symbol Table | Snow&#x27;s Wiki"><meta data-rh="true" name="description" content="What is Symbol Table"><meta data-rh="true" property="og:description" content="What is Symbol Table"><link data-rh="true" rel="icon" href="/img/sio.png"><link data-rh="true" rel="canonical" href="https://wiki.xkun.dev/comp/semantic-analysis/symbol-table"><link data-rh="true" rel="alternate" href="https://wiki.xkun.dev/comp/semantic-analysis/symbol-table" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.xkun.dev/comp/semantic-analysis/symbol-table" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9d99f944.css">
<link rel="preload" href="/assets/js/runtime~main.3057bfbd.js" as="script">
<link rel="preload" href="/assets/js/main.6a823836.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sio.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sio.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Snow&#x27;s Wiki</b></a><a class="navbar__item navbar__link" href="/ds/intro">数据结构</a><a class="navbar__item navbar__link" href="/arch/intro">计算机组成</a><a class="navbar__item navbar__link" href="/os/intro">操作系统</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/comp/intro">编译原理</a><a class="navbar__item navbar__link" href="/net/intro">计算机网络</a><a class="navbar__item navbar__link" href="/db/intro">数据库</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Tools</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tools/vim/intro">vim</a></li><li><a class="dropdown__link" href="/tools/git/intro">git</a></li><li><a class="dropdown__link" href="/tools/tmux/intro">tmux</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lixk28/wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/comp/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/comp/lexical-analysis/lexical-analysis">Lexical Analysis</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lexical Analysis&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/comp/syntax-analysis/syntax-analysis">Syntax Analysis</a><button aria-label="Toggle the collapsible sidebar category &#x27;Syntax Analysis&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/comp/semantic-analysis/semantic-analysis">Semantic Analysis</a><button aria-label="Toggle the collapsible sidebar category &#x27;Semantic Analysis&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/comp/semantic-analysis/syntax-directed-translation">Syntax-Directed Translation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/comp/semantic-analysis/symbol-table">Symbol Table</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/comp/intermediate-code/intermediate-code">Intermediate Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Intermediate Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/comp/semantic-analysis/semantic-analysis"><span itemprop="name">Semantic Analysis</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Symbol Table</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Symbol Table</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-symbol-table">What is Symbol Table<a class="hash-link" href="#what-is-symbol-table" title="Direct link to heading">​</a></h2><p><strong>Symbol table (符号表)</strong> is a important data structure for compilers that tracks information about all program symbols. (符号表是编译器中重要的数据结构，记录程序中每个符号的信息)</p><ul><li>Each entry in symbol table represents a defintion of a identifier (每个表项记录一个标识符的定义)</li><li>Will be updated whenever scopes are entered or exited (每当进入或离开作用域时，必须更新符号表)</li><li>Used to perform binding of identifier uses at current point (用于确定标识符的绑定情况)</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Symbol</h5></div><div class="admonition-content"><p>symbol = variable&#x27;s name = identifier</p></div></div><p>Symbol table can be built in two approaches:</p><ul><li>Traversing the parse tree in a seperate pass after parsing (遍历分析树生成符号表)</li><li>Using semantic actions embedded in parsing stage (在分析过程中生成符号表)</li></ul><p>Symbol table is usually created in the semantic analysis phase, but many compilers set up a table at lexical analysis stage for the various variables in the program. (通常在词法分析阶段就开始准备)</p><p>Symbol table is used in code generation to output assembler directives of the appropriate size and type. (用于类型检查、代码生成等)</p><p>Symbol table is usually discared after generating executable binary, because machine code instructions no longer need symbol informations. For use in debuggers, symbol tables may be included. (生成可执行文件后，符号表通常被丢弃，但调试器可能需要符号表信息包含在二进制中)</p><ul><li>To display symbol names instead of addresses in debuggers (如果不包含符号表信息，调试时无法查看变量的信息)</li><li><code>-g</code> option for gcc to include debug symbol tables</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="binding-and-scoping">Binding and Scoping<a class="hash-link" href="#binding-and-scoping" title="Direct link to heading">​</a></h2><p><strong>Binding (绑定)</strong> matches identifier use with definition. (匹配符号的使用和定义)</p><ul><li>Definition: Associating an id with a memory allocation</li><li>Binding associates an id use with a location, and is an essential step before machine code generation</li></ul><p><strong>Scope (作用域)</strong> is a program region where a definition can be bound. (可以与定义绑定的程序区域)</p><ul><li>Uses of identifier in the scope is bound to that definition</li><li>Uses not in scope of any definition results in undefined error</li><li>Scopes for the same identifier can never overlap, there is at most one binding for a identifier at any time</li></ul><p>Two types of scoping:</p><ul><li><p><strong>Static scoping (静态作用域)</strong>: Scopes formed by where definitions are in program text (程序代码决定)</p><ul><li>Rule: <u>Bind to the closest <span style="color:#3578e5">enclosing</span> definition</u></li><li>Also known as <strong>lexical scoping (词法作用域)</strong></li><li>C/C++, Java, Python, Javascript</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token char">&#x27;x&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// x will be 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Dynamic scoping (动态作用域)</strong>: Scopes formed by when definitions happen during runtime (运行时决定)</p><ul><li>Rule: <u>Bind to the most recent definition in current execution</u></li><li>Perl, Bash, Lisp, Scheme</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/usr/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">greeting</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;uh oh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">greeting</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;hello, world!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$greeting</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># print hello world</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><div class="admonition admonition-question"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 019 6.25c0 .177-.04.264-.077.318a.956.956 0 01-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 00-.313.195 2.416 2.416 0 00-.692.661.75.75 0 001.248.832.956.956 0 01.276-.245 6.3 6.3 0 01.26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 008 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 101.342.67z"></path></svg></span>Static Scoping or Dynamic Scoping</h5></div><div class="admonition-content"><p>Dynamic scoping:</p><ul><li>All bindings are done at execution time</li><li>Hard to figure out for both compiler and human</li></ul><p>Static scoping:</p><ul><li>Leads to fewer programmer errors, bindings are determined by lexical structure of source code</li><li>Leads to more efficient code, compilers can determine bindings at compile time and translate identifier directly to memory location</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-of-symbol-table">Implementation of Symbol Table<a class="hash-link" href="#implementation-of-symbol-table" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="symbol-table-structure">Symbol Table Structure<a class="hash-link" href="#symbol-table-structure" title="Direct link to heading">​</a></h3><p>Symbol table is an important data stucture in compiler, the performance of compiler&#x27;s frontend (lexical, syntax, semantic analysis) is affected by symbol table access time. (符号表访问时间影响前端性能)</p><p>Common data structures for symbol table:</p><ul><li>List<ul><li>Array</li><li>Linked List</li></ul></li><li>Binary tree</li><li>Hash table</li></ul><p>Most compilers choose hash table for its quick access time. (大多数编译器都使用哈希表来存储符号)</p><table><thead><tr><th align="center">Data Structure</th><th align="center">Insert/Delete Time</th><th align="center">Search Time</th><th align="center">Space</th></tr></thead><tbody><tr><td align="center">Array</td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></td><td align="center">No extra space</td></tr><tr><td align="center">Linked List</td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></td><td align="center">Extra pointer space</td></tr><tr><td align="center">Binary Tree</td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mtext>log</mtext><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\text{log}n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord text"><span class="mord">log</span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mtext>log</mtext><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\text{log}n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord text"><span class="mord">log</span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></td><td align="center">more pointer space</td></tr><tr><td align="center">Hash Table</td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></td><td align="center"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></td><td align="center">way more space</td></tr></tbody></table><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><ul><li>For linked list, we can move recently used identifier to the head (将最近使用的标识符移到表头)</li><li>For binary tree, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mtext>log</mtext><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\text{log}n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord text"><span class="mord">log</span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> is average case (or balanced tree), in the worst case, binary tree may reduce to linked list (最坏情况下二叉树退化成链表)</li><li>For hash table, insert/delete/search time can become <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> if with frequent conflicts and long chains, and the size of hash table is way more large than the number of identifiers (如果冲突频繁且链太长，哈希表维护时间会有一定开销，而且哈希表体积远大于标识符数量)</li></ul></div></div><p>Maintaining symbol table:</p><ul><li><code>enter_scope()</code>: start a new scope</li><li><code>exit_scope()</code>: exit current scope</li><li><code>find_symbol(x)</code>: find the information about symbol x</li><li><code>add_symbol(x)</code>: add symbol x to the symbol table</li><li><code>check_symbol(x)</code>: check if symbol x is defined in current scope</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-symbol-table-with-scopes">Handling Symbol Table with Scopes<a class="hash-link" href="#handling-symbol-table-with-scopes" title="Direct link to heading">​</a></h3><p>Organize all symbol tables into a scope stack</p><ul><li>An individual symbol table for each scope, stack holds on entry for each <u>open scope</u></li><li>The innermost scope (current scope) is on the top of stack</li><li>Stack push/pop when entering/exiting a scope<ul><li>Create a new symbol table to hold all variables declared in that scope</li><li>Push/pop the pointer to the symbol table</li></ul></li></ul><p>TODO: an image here.</p><p>Cons of stacking symbol tables:</p><ul><li>Inefficient searching due to multiple hash table lookups: Search from the top of stack, and look up all the symbol tables held by the stack in worst case. All global variables will be at the bottom of the stack.</li><li>Inefficient use of memory due to multiple hash tables: The number of symbol tables is the number of current anticipated scopes.</li></ul><p>Single symbol table for all scopes using chaining (preferred):</p><ul><li>For each identifier, insert at the front of chain with scope level k, search will fetch the front of chain</li><li>Remove all symbols with level k when exiting level k scope</li></ul><p>TODO: an image here.</p><p>Pros of chaining symbol table:</p><ul><li>Lookup requires only a single hash table access</li><li>Save memory due to single hash table</li></ul><p>Cons of chaining symbol table:</p><ul><li>Unsuitable for class scopes (only block scopes)</li><li>Exiting scope is slightly more expensive</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="symbol-table-entry">Symbol Table Entry<a class="hash-link" href="#symbol-table-entry" title="Direct link to heading">​</a></h3><p>TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-and-type-checking">Type and Type Checking<a class="hash-link" href="#type-and-type-checking" title="Direct link to heading">​</a></h2><p><strong>Type (类型)</strong> is a set of values and a set of operations on these values.</p><p><strong>Type checking (类型检查)</strong> verifies type consistency across the program. (类型一致性检查)</p><ul><li><p>A program is said to be <strong>type consistent (类型一致的)</strong> if all operators are consistent with the operand types</p></li><li><p>Much of what we do in semantic analysis is type checking</p></li><li><p><strong>Static type checking (静态类型检查)</strong> (at compile time)</p></li><li><p><strong>Dynamic type checking (动态类型检查)</strong> (at execution time)</p></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lixk28/wiki/tree/main/comp/semantic-analysis/02_symbol-table.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-06-22T05:46:35.000Z">6/22/2022</time></b> by <b>snow</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/comp/semantic-analysis/syntax-directed-translation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Syntax-Directed Translation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/comp/intermediate-code/intermediate-code"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">intermediate-code</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-symbol-table" class="table-of-contents__link toc-highlight">What is Symbol Table</a></li><li><a href="#binding-and-scoping" class="table-of-contents__link toc-highlight">Binding and Scoping</a></li><li><a href="#implementation-of-symbol-table" class="table-of-contents__link toc-highlight">Implementation of Symbol Table</a><ul><li><a href="#symbol-table-structure" class="table-of-contents__link toc-highlight">Symbol Table Structure</a></li><li><a href="#handling-symbol-table-with-scopes" class="table-of-contents__link toc-highlight">Handling Symbol Table with Scopes</a></li><li><a href="#symbol-table-entry" class="table-of-contents__link toc-highlight">Symbol Table Entry</a></li></ul></li><li><a href="#type-and-type-checking" class="table-of-contents__link toc-highlight">Type and Type Checking</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://xkun.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://github.com/lixk28" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://twitter.com/lixk28" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://t.me/lixk28" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Xuekun Li. All rights reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3057bfbd.js"></script>
<script src="/assets/js/main.6a823836.js"></script>
</body>
</html>